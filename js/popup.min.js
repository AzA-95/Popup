(function(){function b(){this.tags={},this.tags.popup=d('popup',document.body),this.tags.popup__overlay=d('popup__overlay',this.tags.popup),this.tags.popup__table=d('popup__table',this.tags.popup),this.tags.popup__cell=d('popup__cell',this.tags.popup__table),this.tags.popup__block=d('popup__block',this.tags.popup__cell),this.tags.popup__close=d('popup__close',this.tags.popup__block),this.tags.popup__change=d('popup__change',this.tags.popup__block),this.eventsTrigger=c?'touchend':'mouseup',this.events(),this.scrollWidth=this.scrollWidthElement(),this.defaults={bodyHidden:!0,addClassNamePopup:'',closeOverlay:!0,closeShow:!0,background:'',closeButtons:'',offsetY:0,offsetX:0,coordElement:''}}var c=/Android|iPhone|iPad|iPod|BlackBerry|WPDesktop|IEMobile|Opera Mini/i.test(navigator.userAgent),d=function(f,g){var h=document.createElement('div');return h.className=f,g&&g.appendChild(h),h};b.prototype={options:function(f){return this.defaults=this.extend({bodyHidden:!0,addClassNamePopup:'',closeOverlay:!0,closeShow:!0,background:'',closeButtons:'',offsetY:0,offsetX:0,coordElement:''},f),this.defaults.background&&(this.tags.popup.style.background=this.defaults.background),this},extend:function(f,g){for(var h in g)g.hasOwnProperty(h)&&(f[h]=g[h]);return f},addCloseButtons:function(){var f=this,g=this.defaults.closeButtons.split(',');g.forEach(function(h){var k=document.querySelectorAll(h.replace(/\s+/g,''));Array.prototype.forEach.call(k,function(l){l.addEventListener(f.eventsTrigger,function(n){return n.stopPropagation(),f.close(),!1},!1)})})},coordSet:function(){var f=this,g=document.querySelector(this.defaults.coordElement);return g&&(this.coords=g.getBoundingClientRect(),this.tags.popup__block.style.left=(this.defaults.bodyHidden?0:window.pageXOffset)+this.coords.left+this.defaults.offsetX+'px',this.tags.popup__block.style.top=(this.defaults.bodyHidden?0:window.pageYOffset)+this.coords.top+this.defaults.offsetY+'px',this.tags.popup__block.style.position='absolute'),this},coordReset:function(){var f=this;return this.defaults={bodyHidden:!0,addClassNamePopup:'',closeOverlay:!0,closeShow:!0,background:'',closeButtons:'',offsetY:0,offsetX:0,coordElement:''},setTimeout(function(){f.tags.popup.style.background=''},500),this.tags.popup__block.style.left='',this.tags.popup__block.style.top='',this.tags.popup__block.style.position='',this},setBodyStyle:function(){var f=window.innerHeight<document.body.scrollHeight;return this.defaults.bodyHidden&&(document.body.classList.add('popup__body_hidden'),f&&(document.body.style.paddingRight=this.scrollWidth+'px')),this},clearBodyStyle:function(){return document.body.classList.remove('popup__body_hidden'),document.body.style.paddingRight='',this},html:function(f,g){return this.tags.popup__close.style.display=this.defaults.closeShow?'':'none',this.setBodyStyle(),this.defaults.coordElement&&this.coordSet(),this.tags.popup__change.innerHTML=f,g&&g.call(this.tags.popup,this.defaults,this.eventsTrigger),this.defaults.closeButtons&&this.addCloseButtons(),this},append:function(f,g){return this.tags.popup__close.style.display=this.defaults.closeShow?'':'none',this.setBodyStyle(),this.defaults.coordElement&&this.coordSet(),this.tags.popup__change.innerHTML+=f,g&&g.call(this.tags.popup,this.defaults,this.eventsTrigger),this.defaults.closeButtons&&this.addCloseButtons(),this},clear:function(){return this.tags.popup__change.innerHTML='',this},show:function(f){return this.defaults.addClassNamePopup&&this.tags.popup.classList.add(this.defaults.addClassNamePopup),this.tags.popup.classList.add('popup_active'),f&&f.call(this.tags.popup,this.defaults,this.eventsTrigger),this},close:function(f){var g=this;return setTimeout(function(){g.tags.popup.classList.remove('popup_active'),g.defaults.addClassNamePopup&&g.tags.popup.classList.remove(g.defaults.addClassNamePopup),g.clear(),g.coordReset(),f&&f.call(g.tags.popup,g.defaults,g.eventsTrigger),g.clearBodyStyle()},50),this},events:function(){var f=this;this.tags.popup__close.addEventListener(this.eventsTrigger,function(g){return g.stopPropagation(),f.close(),!1},!1),this.tags.popup__overlay.addEventListener(this.eventsTrigger,function(g){return g.stopPropagation(),f.defaults.closeOverlay&&f.close(),!1},!1),document.addEventListener('keydown',function(g){27==g.which&&f.close()},!1)},scrollWidthElement:function(){var f=document.createElement('div');f.style.overflowY='scroll',f.style.width='50px',f.style.height='50px',f.style.visibility='hidden',document.body.appendChild(f);var g=f.offsetWidth-f.clientWidth;return document.body.removeChild(f),g}},window.Popup=b})(window);